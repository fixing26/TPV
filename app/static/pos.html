<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TPV - Terminal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/shared.css">
    <link rel="stylesheet" href="css/classic_pos.css">
    <link rel="stylesheet" href="css/active_orders.css"> <!-- Reusing table styles -->
</head>

<body>
    <div class="pos-container">
        <!-- HEADER -->
        <header class="pos-header">
            <div class="brand-title">TPV</div>

            <div class="header-info-block">
                <span class="header-label">Turno</span>
                <span>MaÃ±ana</span>
            </div>
            <div class="header-info-block">
                <span class="header-label">Camarero</span>
                <span id="user-display">Admin</span>
            </div>
            <div class="header-info-block">
                <span class="header-label">Mesa</span>
                <span id="header-table-name">Sin Mesa</span>
            </div>
            <div class="header-info-block">
                <span class="header-label">Pax</span>
                <span>4</span>
            </div>
            <button class="btn btn-warning" onclick="exitToIndex()">SALIR</button>
        </header>

        <!-- BODY -->
        <div class="pos-body">
            <!-- MAIN CONTENT (Left) -->
            <main class="main-content">
                <!-- CATEGORIES -->
                <div id="pos-categories" class="categories-container">
                    <!-- Injected via JS -->
                    <div class="category-btn active">Bebidas</div>
                    <div class="category-btn">Comida</div>
                    <div class="category-btn">Postres</div>
                </div>

                <!-- PRODUCTS GRID -->
                <div id="pos-products" class="products-container">
                    <!-- Injected via JS -->
                </div>

                <!-- FOOTER ACTIONS -->
                <div class="action-bar">
                    <button id="table-action-btn" class="action-btn" onclick="handleTableButton()">
                        <span class="icon">ðŸª‘</span>
                        <span>Mesa</span>
                    </button>
                    <button class="action-btn" onclick="saveOrder()">
                        <span class="icon">ðŸ’¾</span>
                        <span>Guardar</span>
                    </button>
                    <button class="action-btn" onclick="openDrawer()">
                        <span class="icon">ðŸ”“</span>
                        <span>CajÃ³n</span>
                    </button>
                    <!-- Mesas Abiertas Trigger (Instead of always visible sidebar) -->
                    <button class="action-btn" onclick="toggleOpenTablesList()">
                        <span class="icon">ðŸ“‹</span>
                        <span>Abiertas</span>
                    </button>
                </div>
            </main>

            <!-- SIDEBAR (Right) -->
            <aside class="sidebar">
                <!-- TICKET HEADER -->
                <div class="ticket-header">
                    <span>Cant</span>
                    <span>Producto</span>
                    <span>Total</span>
                </div>

                <!-- CART ITEMS -->
                <div id="cart-items" class="cart-items">
                    <!-- Injected via JS -->
                </div>

                <!-- TOTAL DISPLAY -->
                <div id="cart-total" class="total-display">0.00â‚¬</div>

                <!-- NUMPAD BUFFER DISPLAY -->
                <div id="numpad-display" class="total-display">
                </div>

                <!-- NUMPAD -->
                <div class="numpad-container">
                    <div class="numpad-controls">
                        <button class="control-btn up-down">â¬†</button>
                        <button class="control-btn up-down">â¬‡</button>
                        <button class="control-btn control-btn-del" onclick="removeSelectedItem()">DEL</button>
                    </div>
                    <div class="numpad-grid">
                        <button class="num-btn" onclick="numpadInput(7)">7</button>
                        <button class="num-btn" onclick="numpadInput(8)">8</button>
                        <button class="num-btn" onclick="numpadInput(9)">9</button>
                        <button class="num-btn" onclick="numpadInput(4)">4</button>
                        <button class="num-btn" onclick="numpadInput(5)">5</button>
                        <button class="num-btn" onclick="numpadInput(6)">6</button>
                        <button class="num-btn" onclick="numpadInput(1)">1</button>
                        <button class="num-btn" onclick="numpadInput(2)">2</button>
                        <button class="num-btn" onclick="numpadInput(3)">3</button>
                        <button class="num-btn" onclick="numpadInput('C')">C</button>
                        <button class="num-btn" onclick="numpadInput(0)">0</button>
                        <button class="num-btn num-btn-pay" onclick="openPaymentModal()">ðŸ’µ</button>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Modals (Table Selection, etc) - Reusing existing structure but might need styling tweaks -->
    <div id="table-selection-modal" class="modal-overlay">
        <div class="modal-content modal-content-large">
            <div class="modal-header">
                <h2>Seleccionar Mesa</h2>
                <button class="close-btn" onclick="closeTableModal()">Ã—</button>
            </div>
            <div class="modal-body modal-body-scroll">
                <div id="table-selection-grid" class="tables-grid">
                    <!-- Tables injected here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Open Tables List Modal/Overlay (New, since we removed sidebar list) -->
    <div id="open-tables-modal" class="modal-overlay">
        <div class="modal-content modal-content-small">
            <div class="modal-header">
                <h2>Mesas Abiertas</h2>
                <button class="close-btn"
                    onclick="document.getElementById('open-tables-modal').classList.remove('active')">Ã—</button>
            </div>
            <div id="open-tables-list-modal-content">
                <!-- Open tables list -->
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="modal-overlay">
        <div class="modal-content modal-content-small">
            <div class="modal-header">
                <h2>Cobrar / Cerrar Venta</h2>
                <button class="close-btn" onclick="closePaymentModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div id="payment-total-display">
                    0.00â‚¬
                </div>

                <div class="payment-buttons-grid">
                    <button class="btn btn-secondary payment-btn payment-btn-cash" onclick="processPayment('cash')">
                        ðŸ’µ Efectivo
                    </button>
                    <button class="btn btn-secondary payment-btn payment-btn-visa" onclick="processPayment('visa')">
                        ðŸ’³ Visa
                    </button>
                    <button class="btn btn-secondary payment-btn payment-btn-amex" onclick="processPayment('amex')">
                        ðŸ’³ Amex
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="js/api.js?v=2.1"></script>
    <script src="js/utils.js?v=2.1"></script>
    <script src="js/pos.js?v=2.3"></script>
</body>

</html>